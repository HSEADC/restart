<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="S_Content"></div>
    <script type="module">
      import Airtable from 'airtable'

      const token =
        'patDfa0WB3jdI1lRb.bf40d1384c80e8444c5ec0f74316ed5e3c11e6cdfe7307a4d089241789f3b9a7'
      // Airtable.configure({
      //   endpointUrl: 'https://api.airtable.com',
      //   apiKey: token
      // })
      // var base = Airtable.base('appFcJgEisdpQCNWD')
      Airtable.configure({
        endpointUrl: 'https://api.airtable.com',
        apiKey:
          'patDfa0WB3jdI1lRb.bf40d1384c80e8444c5ec0f74316ed5e3c11e6cdfe7307a4d089241789f3b9a7'
      })
      var base = Airtable.base('appFcJgEisdpQCNWD')

      function getPostTeasers() {
        return new Promise((resolve, reject) => {
          const content = []
          base('Table 1')
            .select({ maxRecords: 100 })
            .firstPage()
            .then((result) => {
              result.forEach((record) => {
                content.push({
                  id: record.id,
                  title: record.fields['Title'],
                  description: record.fields['Description'],
                  image: record.fields['Images'],
                  url: record.fields['URL']
                })
              })
              resolve(content)
            })
        })
      }

      document.addEventListener('DOMContentLoaded', () => {
        getPostTeasers().then((data) => {
          content = data
          createCards(content)
        })
      })

      function createCards(content) {
        //   content.forEach((contentDataItem) => {
        //     let { id, title, description, image, url } = contentDataItem

        const contentItem = document.createElement('a')
        contentItem.classList.add('O_ContentItem')
        // contentItem.classList.add(`${className}`)
        contentItem.href = content.url

        //   console.log(content.url)
        //   console.log(content)

        const contentItemCover = document.createElement('img')
        contentItemCover.classList.add('A_ContentItemCover')
        contentItemCover.src = image

        const contentItemTitle = document.createElement('h3')
        contentItemTitle.classList.add('A_ContentItemTitle')
        contentItemTitle.innerText = title

        const contentItemDescription = document.createElement('p')
        contentItemDescription.classList.add('A_ContentItemDescription')
        contentItemDescription.innerText = description

        // const contentItemTags = document.createElement('div')
        // contentItemTags.classList.add('C_ContentItemTags')

        // tags.forEach((tag) => {
        //   const contentItemTag = document.createElement('div')
        //   contentItemTag.classList.add('A_ContentItemTag')
        //   contentItemTag.innerText = tag
        //   contentItemTags.appendChild(contentItemTag)
        // })

        contentItem.appendChild(contentItemCover)
        contentItem.appendChild(contentItemTitle)
        contentItem.appendChild(contentItemDescription)

        //   document.querySelector('.S_Content').appendChild(contentItem)
        //     })
      }
    </script>
  </body>
</html>
